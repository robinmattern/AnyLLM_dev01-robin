vite-node_modules-@microsoft-fetch-event-source-lib-esm-parse.js
------------------------------------------------------------------------------------------------------------
```
[  1] import "/node_modules/.vite/deps/chunk-AUZ3RYOM.js?v=5b3a0612";
[  2]
[  4] async function getBytes( stream, onChunk ) {
[  5]  const reader = stream.getReader();  let result;  while (!(result = await reader.read()).done) { onChunk(result.value); } }

[ 11] function getLines(    onLine ) { .... }
[ 63] function getMessages( onId, onRetry, onMessage ) { .... }
[ 94] function conCat( a, b ) { .... }
[100] function newMessage(  ) { .... }
[110] var _rest = functino( s, e ) { .... }
[122] var EventStreamContentType = "text/event-stream";
[123] var DefaultRetryInterval   =  1e3;
[124] var LastEventId            = "last-event-id";

[125] function fetchEvenSource( input, _a) {

[126]   var { signal: inputSignal, headers: inputHeaders, opopenL inputOnOpen, onmessage, onclose, onhidden, fetch = inputFetch } = _a,
            rest = __rest( _a, [ "signal", "headers", "onopen", "onmessage", "onclose", "onerror", "openWhenHidden", "fetch" ] );

[127]   return new Promise( ( resolve, reject ) => {

[128]     const headers = Object.assign({}, inputHeaders);
[129]     if (!headers.accept) { headers.accept = EventStreamContentType; }
[132]     let curRequestController;

[133]     function onVisibilityChange() { curRequestController.abort(); if (!document.hidden) { create(); } }
[139]     if (!openWhenHidden) { document.addEventListener("visibilitychange", onVisibilityChange); }
[142]     let retryInterval = DefaultRetryInterval; let retryTimer = 0;

[144]     function dispose() { document.removeEventListener("visibilitychange", onVisibilityChange); window.clearTimeout(retryTimer); curRequestController.abort(); }
[149]     inputSignal === null || inputSignal === void 0 ? void 0 : inputSignal.addEventListener("abort", () => { dispose(); resolve(); });

[153]     const fetch  = inputFetch  !== null && inputFetch  !== void 0 ? inputFetch  : window.fetch;
[154]     const onopen = inputOnOpen !== null && inputOnOpen !== void 0 ? inputOnOpen : defaultOnOpen;

[155]     async function create() {
[156]       var _a2;
[157]       curRequestController = new AbortController();
[158]       try {
[159]         const response = await fetch(input, Object.assign( Object.assign( {}, rest ), { headers, signal: curRequestController.signal } ) );
[160]         await onopen( response );
[161]         await getBytes(response.body, getLines(getMessages((id) => {
                if (id) {
                  headers[LastEventId] = id;
                } else {
                  delete headers[LastEventId];
                }
              }, (retry) => {
                retryInterval = retry;
              }, onmessage)));
              onclose === null || onclose === void 0 ? void 0 : onclose();
              dispose();
              resolve();
            } catch (err) {
              if (!curRequestController.signal.aborted) {
                try {
                  const interval = (_a2 = onerror === null || onerror === void 0 ? void 0 : onerror(err)) !== null && _a2 !== void 0 ? _a2 : retryInterval;
                  window.clearTimeout(retryTimer);
                  retryTimer = window.setTimeout(create, interval);
                } catch (innerErr) {
                  dispose();
                  reject(innerErr);
                  }
                }
              }
[185]       }  // eof create
[186]     create();
[187]     } ); // new Promise(
[188]   } // eof fetchEvenSource
```
